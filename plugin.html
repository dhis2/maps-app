<!DOCTYPE html>

<head>
    <title>DHIS2 Maps Plugin</title>
    <script src="http://localhost:8080/dhis-web-core-resource/react/16.1.1/umd/react.development.js"></script>
    <script src="http://localhost:8080/dhis-web-core-resource/react-dom/16.1.1/umd/react-dom.development.js"></script>
    <script src="polyfill.min.js"></script>
    <script src="map.js"></script>
    <style>
        .map {
            width: 450px;
            height: 450px;
            border: 1px solid black;
        }
        #savedMapPicker {
            padding: 30px;
        }
        #savedMapPicker input {
            margin: 5px;
        }
    </style>
</head>

<body>
    <div id="savedMapPicker" class="savedMapPicker">
        <div>
            <label>Saved Map ID</label>
            <input type="text" id="inputMapID" value="dhbFLIo1cDV" />
        </div>
        <div>
            <label>User Org Unit</label>
            <input type="text" id="inputUserOrgUnit" value="O6uvpzGd5pu" />
            <small><strong>Bo</strong> district = <strong>O6uvpzGd5pu</strong></small>
        </div>
        <div>
            <button type="submit" id="btnLoadPlugin">Load</button>
        </div>
    </div>
    <div id="mapContainer">
        <div id="map" class="map"></div>
        <button type="submit" id="btnReset">Reset</button>
    </div>
    <script>
        const picker = document.getElementById('savedMapPicker');
        const mapContainer = document.getElementById('mapContainer');
        
        picker.style.display = 'block';
        mapContainer.style.display ='none';

        mapPlugin.url = '//localhost:8080';
        mapPlugin.username = 'admin';
        mapPlugin.password = 'district';
        function onReloadBtnPress(e) {
            mapPlugin.load({
                id: document.getElementById('inputMapID').value,
                el: 'map',
                userOrgUnit: [document.getElementById('inputUserOrgUnit').value],
            })

            picker.style.display = 'none';
            mapContainer.style.display = 'block';
        }
        function onResetBtnPress(e) {
            window.location.reload();
        }
        document.getElementById('btnLoadPlugin').onclick = onReloadBtnPress;
        document.getElementById('btnReset').onclick = onResetBtnPress;
    </script>
</body>

</html>